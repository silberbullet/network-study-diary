# 3-1 LAN을 넘어서는 네트워크 계층

스터디 일자 : 2024.9.03 (화) 20:00

[스터디 끝난 회고](#-스터디-끝난-회고)

## 📚 공부 정리

### 📌 데이터 링크 계층의 한계

**❗ 물리 계층과 데이터 링크 계층만으로 미국에 있는 친구에게 메시지를 보내기 어렵다.**
  - 물리 계층과 데이터 링크 계층만으로는 다른 네트워크까지의 도달 경로를 파악하기 어려움.
    - 두 개의 계층은 LAN을 다루는 계층
    - 미국 까지 가는데 다양한 경로를 통해 이동을 해야하지만 **라우팅** 기능이 존재하지 않음.
      - `라우팅`은 패킷이 이동할 최적의 경로를 결정해줌. (라우터)
      - 네트워크 계층이 있어야 네트워크 간의 라우팅이 가능.
        
**❗ MAC 주소만으로는 모든 네트워크에 속한 호스트의 위치를 특정하기 어렵다.**
  - MAC은 택배로 비교할 때, 송신인과 같음.
  - 송신인 가지고는 택배를 보내기 어려움.

### 📌 인터넷 프로토콜(IP)

**❗ 네트워크 계층의 IP**
  - MAC 주소가 수신인 역할을 한다면, 수신지 역할은 **네트워크 계층의 IP주소**
  - IP 주소는 `논리 주소`라고 함.
  - DHCP 프로토콜을 이용해 자동으로 할당 받거나 사용자가 지적 할당 혹은 복수의 IP 주소를 가질 수 있음.
  - IP 주소를 기반으로 라우팅이 일어남.

**❗ IP 주소 형태**
  - 4byte로 주소 표현, 숫자당 8비트로 표현되어 0~255범위 안에 있는 네 개의 10진수로 표현
  - 8비트를 `옥텟`이라고 불림
  - 192.168.1.1 각 숫자들은 8비트로 표현 옥텟

**❗ IP 기능**
  - **IP 주소 지정**
    - IP 주소를 바탕으로 송수신 대상을 지정함
       
  - **IP 단편화**
    - 전송하고자 하는 패킷의 크기가 MTU라는 최대 전송 단위보다 클 경우, 이를 MTU 크기 이하의 복수의 패킷을 나누는 것
      - **MTU** : 한 번에 전송 가능한 IP 패킷의 최대 크기 ( 일반적으로 1500BYTE )
        - https://en.wikipedia.org/wiki/Maximum_transmission_unit#Table_of_MTUs_of_common_media
        - https://www.hardreset.info/ko/articles/speed-up-wifi/
          ```
          MTU는 간단히 말하자면 하나의 프레임(or 패킷)으로 보낼 수 있는 최대 데이터 크기라고 보시면 됩니다.
            MTU보다 큰 프레임은 여러 개의 프레임으로 쪼개져서 전송되게 됩니다.
            MTU 1500이 흔히 말하는 이더넷(v2)의 표준 MTU 값이며, 이보다 큰 값 (1501~9216)을 점보 프레임이라고 부릅니다.
            MTU가 크면 한번에 보낼 수 있는 데이터량이 많아지게 되므로 효율이 증가합니다. (일반적으로 인터럽트 부하가 줄어들거나 최대 네트워크 대역폭이 증가하는 형태로 보여지게 됩니다.) 반면, 작은 크기의 프레임이 빈번한 요청을 하는 경우이거나 네트워크 대역폭/품질이 나쁜 경우에는 오히려 네트워크 성능이 떨어지게 됩니다.
            
            1500으로 꽁꽁 묶여있는 까닭은 동일한 매체에 MTU가 서로 다른 장비들이 연결될 경우 혼선이 발생하기 때문입니다. 만약 점보 프레임 (보편적으로 MTU 9000이 주로 쓰입니다.)을 사용한다면, 그 매체에 연결된 모든 장치는 동일한 MTU 값을 사용하여야만 네트워크에 혼선이 없습니다.
            
            TCP에도 MTU라는 개념은 존재합니다만, 이쪽은 Path MTU discovery 알고리즘을 사용하여 호스트간의 MTU값을 결정하기 때문에 표준 규격에서는 최소값만 존재합니다. (상호간의 MTU 값이 다를 경우 작은 쪽에 맞춥니다.)
            
            일반적으로 이더넷 망의 MTU 크기를 건들이는 것 자체가 호환성 문제를 일으킬 수 있기 때문에 크기를 조절하는 것은 추천하지 않습니다. (컴퓨터들의 성능이 좋아진 지금은 1Gbps의 경우도 MTU 9000을 굳이 사용할 필요성이 적습니다. 10Gbps정도 되면 필요해지긴 합니다.)
            또한, 공인망(인터넷)에 연결된 NIC의 경우 점보 프레임을 사용하는 것은 그리 추천하고 싶지 않습니다. 공인망의 경우 점보 프레임을 사용할 정도의 대역폭을 제공하는 경우가 흔치 않고, 작은 프레임이 빈번한 상황에서 네트워크 속도 지연이 발생할 수 있으니까요
          ```
**❗ IPv4**
IPv4 패킷은 프레임의 페이로드로 데이터 필드 명시 된다.

**IPv4의 중요한 7가지 헤더**
  - **식별자**
  - **플래그**
  - **단편화 오프셋**
  - **TTL**
  - **프로토콜**
  - **송신지 IP주소와 수신지 IP주소**
    
**❗ IPv6**
  - **다음 헤더**
  - **홉 제한**
  - **송신지 IP주소와 수신지 IP주소**


### 📌 ARP


## ⭐ 스터디 끝난 회고



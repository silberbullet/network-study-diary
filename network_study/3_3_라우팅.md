# 3-3 라우팅

스터디 일자 : 2024.9.10 (화) 20:00

[스터디 끝난 회고](#-스터디-끝난-회고)

## 📚 공부 정리

### 📌 라우팅
 
- **라우터** : 패킷이 서로 다른 네트워크 간에 이동할 수 있도록 **최적의 경로를 설정하고** 연결을 제공
- **홉**(hop) : 라우터와 라우터 또는 호스트와 라우터 간에 패킷이 이동하는 각각의 과정

라우터는 패킷을 경유할 경로를 결정할 때 **라우팅 테이블**을 참조, **라우팅 테이블**은 목적지까지 가는 경로와 관련된 정보를 담고 있는 표로, 네트워크 통신에서 중요한 역할

- **라우팅 테이블**
    - **수신지 IP 주소와 서브넷 마스크**: 패킷의 최종 목적지를 나타냄
    - **다음 홉**: 최종 목적지에 도달하기 위해 다음에 경유해야 할 IP 주소 또는 인터페이스를 의미하며, 때때로 **게이트웨이**로 불리기도 함
    - **네트워크 인터페이스**: 패킷이 외부로 나가는 통로를 나타내고, 네트워크 카드(NIC)의 이름이나 대응하는 IP 주소로 표시될 수 있음
    - **메트릭**: 경로의 비용을 의미, 라우터는 메트릭이 가장 작은 경로를 선호하여 최적 경로를 선택


- **디폴트 라우트**
    - 라우팅 테이블에 특정 경로가 없을 때 사용
    - 경로가 명확하지 않은 패킷을 전송할 기본 경로를 지정하며, 일반적으로 **0.0.0.0/0**으로 설정
    - 디폴트 라우트는 네트워크 외부로 나갈 때 주로 사용
    
- **기본 게이트웨이**
    - 호스트가 속한 네트워크 외부로 나가기 위한 첫 번째 경로
    - 보통 라우터의 IP 주소를 의미하며, 이 게이트웨이를 통해 패킷은 다른 네트워크로 이동
    -  라우팅 테이블에 지정되지 않은 목적지로 향하는 패킷은 디폴트 라우트를 통해 기본 게이트웨이를 경유


### 📌 정적 라우팅과 동적 라우팅

**❗정적 라우팅**
- 동적으로 데이터와 경로 정보를 저장
- 관리자가 수동으로 라우팅 테이블에 경로를 추가하는 방식
- 이 방식은 네트워크 구조가 고정되어 있고 자주 변경되지 않을 때 유용
- 하지만 네트워크 상태가 변경되면 수동으로 테이블을 수정해야 하므로 관리에 많은 시간이 소요될 수 있음

    
**❗동적 라우팅**
- 라우터가 자동으로 경로를 탐색하고 라우팅 테이블을 갱신하는 방식
- **동적 라우팅 프로토콜**을 사용하며, 네트워크 상황에 따라 테이블을 실시간으로 업데이트
- 동적 라우팅 프로토콜은 네트워크 내에서 최적의 경로를 지속적으로 찾기 때문에 변화에 유연하게 대응


    
### 📌 라우팅 프로토콜

**라우팅 프로토콜은 라우터 간에 정보를 교환하여 패킷의 이동 경로를 설정하는 데 사용**

**❗IGP**
- **RIP**(Routing Information Protocol):
    - **거리 벡터 라우팅 프로토콜**
    - 경유하는 라우터의 수(**홉 수**)를 기준으로 최적 경로를 선택
    - 인접한 라우터 간에 경로 정보를 주기적으로 교환하여 라우팅 테이블을 갱신
    - 간단한 방식이지만, 경유 홉 수가 15를 초과하면 경로를 찾지 못하는 단점
      
- **OSPF**(Open Shortest Path First):
    - **링크 상태 라우팅 프로토콜**
    - 네트워크 상태 정보를 그래프 형태로 저장하고, 이를 기반으로 최적 경로를 계산
    - 네트워크 대역폭을 고려하여 경로를 선택하며, 대역폭이 넓을수록 메트릭이 낮은 경로로 간주
    - OSPF는 네트워크 구성이 변경되었을 때만 테이블을 갱신하므로, RIP과 달리 불필요한 업데이트가 적음
    - AS를 에어리어(Area)라는 단위로 나뉘고, 각 에어리어는 ABR(Area Border Router)를 통해 서로 연결

**❗BGP**

EGP는 AS 간의 라우팅을 담당하며, 대표적인 프로토콜로 **BGP**(Border Gateway Protocol)가 있음

- **BGP**:
    - AS 간의 통신을 위한 프로토콜로, 경로 선택 시 홉 수만이 아니라 다양한 **정책과 속성**을 고려
    - 주요 속성:
        1. **AS-PATH**: 패킷이 목적지까지 도달할 때 거쳐 가는 AS들의 목록을 나타냄
        2. **NEXT-HOP**: 패킷이 다음에 경유할 라우터의 IP 주소
        3. **LOCAL-PREF**: 특정 경로를 더 선호하도록 설정할 수 있는 값, 값이 클수록 우선 순위가 높음
     
**❗AS(Autonomous System)**

AS는 하나의 관리 주체에 의해 운영되는 네트워크 그룹, 인터넷은 여러 AS들이 서로 연결된 형태로 구성되며, 각 AS는 고유한 AS 번호(ASN)를 가지고 있음

-**내부 라우팅(IGP)**: AS 내부에서 사용하는 라우팅을 담당하며, 대표적으로 **RIP**와 **OSPF** 같은 프로토콜이 사용됩니다.
-**외부 라우팅(EGP)**: 다른 AS와 통신할 때 사용되는 라우팅으로, 주로 **BGP**를 통해 외부 경로를 설정합니다.

- AS 간 통신
    - AS 간 통신은 BGP를 통해 이루어지며, **피어링**이라는 과정을 통해 AS 간 경로가 설정
    - 피어링은 BGP 라우터 간에 경로 정보를 교환하며, **AS-PATH**와 같은 정보를 바탕으로 경로가 결정
           
      
## ⭐ 스터디 끝난 회고

각 계층에 맞는 물리적인 장비를 공부하고 있다보니,” 이 장비는 이런 계층에 관려해서 작업해!”라고 착각했지만 오늘 스터디가 그런 오해를 깨주고 다시 한번 개념을 정리하게 해주는 스터디 였다고 생각합니다.  

 스터디가 끝나고 드는 생각은 라우터도 저희 PC랑 다를게 없다고 생각합니다.

라우터가 ARP, 라우팅 테이블을 가지고 있다고 합니다. 이는 메모리를 가지고 있을 것 같아서 라우터 내부에는 어떤 메모리가 있는지 찾아 봤습니다.

**[ 공유글 ]**

라우터 내부 메모리 종류 

- RAM
    - 동적으로 데이터와 경로 정보를 저장
        - ARP 테이블, 라우팅 테이블 , 패킷 버퍼
- NVRAM
    - 라우터의 시작 구성 파일 저장
- Flash 메모리
    - 라우터의 운영체제 IOS 혹은 펌웨어나 시스템 파일 저장
- ROM
    - 라우터의 초기화를 담당하는 기본 프로그램을 저장

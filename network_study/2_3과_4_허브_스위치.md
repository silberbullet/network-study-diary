# 2-3 허브, 2-4 스위치

스터디 일자 : 2024.9.01 (일) 20:00

[스터디 끝난 회고](#-스터디-끝난-회고)

## 📚 공부 정리

### 📌 허브(Hub)

통신 매체를 통해 송수신되는 메시지는 다른 호스트에게 전달되는 과정에서 네트워크 장비를 거칠 수 있다.그중 허브는 물리 계층에서 담당하는 네트워크 장비이다.

**❗ 주소가 개념이 없는 물리 계층**

  - **물리 계층에는 주소 개념이 없다.** 그렇기에 물리 계층의 네트워크 장비는 송수신되는 정보에 대한 어떠한 조작이나 판단이 없다.
  - 송수신지를 특정할 수 있는 주소는 `데이터 링크 계층 부터` 존재한다. **MAC 주소가 여기에 속한다.**

![image](https://github.com/user-attachments/assets/175bbd24-4f45-42d7-9187-354af9b90949)


**허브는 여러 대의 호스트를 연결하는 장치이다.** `리피터 허브`라고 불려지며, 이더넷 네트워크의 허브는 `이더넷 허브`라고 불린다.

허브의 `포트(Port)`는 호스트와 연결된 통신 매체를 연결해주는 연결 지점이다.

**❗ 허브의 특징**

  1. **전달 받은 신호를 다른 모든 포트로 그대로 보낸다.**
      -  허브는 수신지를 특정할 수 없기에 신호를 전달 받으면 송신지를 제외한 모든 포트에 수신을 함
      -  허브를 통해 신호를 받은 호스트는 **데이터 링크 계층에서 패킷의 MAC 주소를 확인 후, 관련 없는 주소는 폐기**
        
  2. **반이중 모드 통신**
      -  A -> B로 메시지를 송신할 시, 동시에 B->A로 메시지 송신 불가 **(동시 송신 불가)**
      -  무전기와 같은 방식
      - **전이중 모드 통신**
           - A <-> B로 메시지를 동시에 양뱡향으로 통신하는 방식
  
  3. **콜리전 도메인**
     - 허브에 충돌이 발생 할 수 있는 영역 
     - 허브의 `반이중 통신`으로 인해 두 개의 호스트가 허브의 동시에 통신을 보낼 시 `충돌`이 발생
     - 허브에 호스트가 많이 연결되 있을수록 충돌 발생 가능성은 높음

  4. **CSMA/CD**
     - 반이중 이더넷 네트워크에서 충돌을 방지하는 대표적인 프로토콜 **(이더넷을 대표하는 송수신 방법)**
     - **CS (캐리어 감지)**
       - 네트워크에서 메시지를 보내기 전에 현재 네트워크상에서 전송 중인 것이 있는지 파악 (동시 송신 피하기 위함)
     - **MA (다중 접근)**
       - 부득이 하게 두 개 이상의 호스트가 동시에 네트워크에 전송 (충돌 발생)
     - **CD (충돌 검출)**
       - 충돌을 검출한 호스트는 충돌이 발생함을 **잼 신호**로 알림
       - 다른 호스트는 임의 시간 대기 후 재전송 
     
**📦 허브의 종류**

<details> <summary><strong>1. 더미 허브</strong></summary> <ul> <li><strong>역할:</strong> 단순히 컴퓨터와 컴퓨터 간의 네트워크를 중계하는 장치.</li> <li><strong>단점:</strong> 네트워크 전체 대역폭을 연결된 노드 수만큼 나누어 사용. 연결된 노드 수가 많아지면 속도가 감소.</li> <li><strong>예시:</strong> 100Mbps 대역폭 허브에 4개의 컴퓨터가 연결되면 각 컴퓨터는 25Mbps만 할당받음.</li> </ul> </details> <details> <summary><strong>2. 스위칭 허브</strong></summary> <ul> <li><strong>특징:</strong> 더미 허브의 단점을 보완한 장치로, 수신지 주소에 따라 스위칭하여 데이터 전송.</li> <li><strong>장점:</strong> 각 컴퓨터가 100Mbps의 대역폭을 독립적으로 사용 가능. CSMA/CD 방식에서도 충돌 발생 없음.</li> </ul> </details> <details> <summary><strong>3. 스태커블 허브</strong></summary> <ul> <li><strong>특징:</strong> 스택 접속 포트를 통해 허브 간 연결이 가능하여 용량 확장.</li> <li><strong>장점:</strong> 여러 허브를 연결해도 하나의 허브처럼 동작하여 데이터 전송 속도의 차이가 적음. 중규모 이상의 네트워크에 적합.</li> </ul> </details> <details> <summary><strong>4. 인텔리전트 허브</strong></summary> <ul> <li><strong>특징:</strong> 신호 조절, 변경 등 다양한 지능형 기능을 포함한 허브.</li> <li><strong>장점:</strong> 네트워크 관리 시스템을 통해 데이터 제어와 분석이 가능. 충돌 발생 시 해당 포트를 차단하여 다른 단말기들이 문제없이 통신 가능.</li> </ul> </details>

---

### 📌 스위치(Switch)

스위치는 데이터 링크 계층의 네트워크 장비이다. 2계층에 사용하여 `L2 스위치`라고 불린다.

![image](https://github.com/user-attachments/assets/29093db2-919a-4e5e-be08-a61bd4e56f12)

스위치의 여러 포트에는 호스트 연결이 가능하다. ( 허브와 유사 ) 

**MAC 주소를 학습할 수 있는** 스위치지는 전달받은 신호를 원하는 포트로만 내보낼 수 있다. MAC 주소를 가진 호스트에만 프레임 전달이 가능하며 **전이중 모드 통신을 지원한다.**

스위치를 이용 시, 포트별로 `콜리전 도메인`이 나뉘며, **CSMA/CD 프로토콜이 필요 없다.** 

**❗ 스위치의 특징**

  1. **MAC 주소 학습**
     - 스위치는 특정 포트와 MAC 주소 간의 관계를 학습하여 이를 **MAC 주소 테이블**에 저장합니다.
         - **플러딩(Flooding)**: 처음에는 MAC 주소와 포트의 연관 관계를 알지 못하므로, 송신지 포트를 제외한 모든 포트로 프레임을 전송합니다.
         - **필터링(Filtering)**: MAC 주소 테이블에 학습된 포트가 수신지라면, 해당 포트로만 데이터를 전달하고 다른 포트에는 보내지 않는 기능입니다.
         - **포워딩(Forwarding)**: 필터링된 프레임을 실제로 해당 포트에 내보내는 과정입니다.
         - **에이징(Aging)**: 일정 시간 동안 프레임이 전송되지 않으면 MAC 주소 테이블에서 해당 항목을 삭제합니다.
  
  2.**VLAN (Virtual LAN)**
  - **가상 LAN 구성**: 스위치는 VLAN을 만들어 논리적으로 네트워크를 구획할 수 있습니다. VLAN으로 나뉜 네트워크는 서로 통신하기 위해 상위 계층의 장비가 필요합니다.
  - VLAN 구성 방법:
    - **포트 기반 VLAN**: 특정 포트에 VLAN을 할당하여 호스트를 연결하는 방식입니다.
    - **VLAN 트렁킹**: 여러 대의 VLAN 스위치를 효율적으로 연결하는 방식으로, **트렁크 포트**를 사용해 스위치 간에 VLAN 정보를 포함한 이더넷 프레임을 주고받습니다. 이때, VLAN 태그가 헤더를 추가된 이더넷 프레임을  802.1Q  프레임이라고 한다.
    - **MAC 기반 VLAN**: 포트가 아닌 송신하는 프레임의 MAC 주소에 따라 VLAN을 결정하는 방식입니다.


## ⭐ 스터디 끝난 회고

**MAC 주소 테이블의 TYPE과 AGE  부가적인 정보!**

**TYPE는 스위치의 MAC 주소가 어떻게 저장 됐는지 알려줍니다.**

- **Dynamic (동적):** 스위치가 자동으로 학습한 MAC 주소입니다. 보통 패킷이 특정 포트를 통해 들어올 때 스위치가 해당 MAC 주소를 자동으로 테이블에 기록합니다. 이러한 항목은 일정 시간이 지나면 테이블에서 제거될 수 있습니다. **(AGE를 확인 한 후)**
- **Static (정적):** 네트워크 관리자가 수동으로 설정한 MAC 주소입니다. 스위치는 이 MAC 주소를 테이블에서 삭제하지 않고 항상 유지합니다. 정적 항목은 중요한 장비나 특정 보안 정책에 따라 설정됩니다.
- **Sticky (스티키):** 스티키는 동적 학습 방식이지만, 한번 학습된 MAC 주소는 스위치가 다시 부팅될 때까지 유지되는 방식입니다. 주로 보안 목적으로 사용됩니다.

**AGE는 해당 MAC 주소가 얼마나 오래 저장 됐는지 알려줍니다.**

- Dynamic Type으로 학습한 MAC 주소를 일정 시간 동안만 테이블에 유지하기 위해 **에이징 타이머**를 설정 합니다. 만료되면 MAC 주소에서 삭제 됩니다.
    - 네트워크 환경이 변할 때 오래된 정보를 제거할 때 유리할 것 같아요
- **갱신 :** Dynamic Type으로 저장한 MAC 주소에 새로운 패킷이 들어오면 **에이징 타이머**는 리셋 됩니다.

**단순 충돌이 없다는 이유로 스위치를 사용할까요?** 

- **불필요한 트래픽 줄이기 :** 저는 단순히 송수신 주소가 정해져 있으니 알아서 통신이 이루어지는 줄 알았어요. **해당 목적지 장치로만 전달을 해주는게 바로 스위치 였습니다.** 스위치를 통해서 송수신이 확실하니 허브 처럼 불필요한 트래픽을 줄일 수 있었습니다. 이는 네트워크의 대역폭을 절약하는 행위 입니다.

# 3-2 IP 주소

스터디 일자 : 2024.9.08 (일) 20:00

[스터디 끝난 회고](#-스터디-끝난-회고)

## 📚 공부 정리

### 📌 클래스풀 주소 체계

**클래스풀 주소 체계란 클래스를 기반으로 IP 주소를 관리하는 주소 체계**

**❗네트워크 주소와 호스트 주소**
  - 네트워크 주소 : 네트워크 ID 혹은 네트워크 식별자
  - 호스트 주소 : 호스트 ID, 호스트 식별자
  - IPv4 기준으로 네트워크 주소와 호스트 주소를 할당 할 수 있음 (8~24비트)

**❗IP주소의 클래스**
  - 네트워크 크기에 따라 IP주소를 분류하는 기준
  - 필요한 IP개수에 따라 네트워크 크기를 가변적으로 조정하여 네트워크 주소와 호스트 주소를 구획
  - 초기 비트를 통해 네트워크 크기를 규약
    
**클래스 A**
- **초기 비트:** 0xxxxxxx  
- **주소 범위:** 1.0.0.0 ~ 126.255.255.255  
- **네트워크 비트:** 8비트  
- **호스트 비트:** 24비트  

**클래스**
- **초기 비트:** 10xxxxxx  
- **주소 범위:** 128.0.0.0 ~ 191.255.255.255  
- **네트워크 비트:** 16비트  
- **호스트 비트:** 16비트  

**클래스 C**
- **초기 비트:** 110xxxxx  
- **주소 범위:** 192.0.0.0 ~ 223.255.255.255  
- **네트워크 비트:** 24비트  
- **호스트 비트:** 8비트  

**클래스 D 및 E (특수 목적)**
- **클래스 D (멀티캐스트):** 1110xxxx  
- **클래스 E (예약):** 1111xxxx  

IPv4의 클래스 기반 주소 체계는 네트워크와 호스트 비트를 구분하기 위해 초기 비트 패턴을 사용합니다.  
- 클래스 A는 대규모 네트워크용 (많은 호스트)
- 클래스 C는 소규모 네트워크용 (적은 호스트)  
- 클래스 D와 E는 멀티캐스트 및 예약 용도로 사용됩니다.

**❗네트워크 주소와 브로드 캐스트 주소**
- 네트워크 주소는 호스트 주소가 모두 0인 주소
- 브로드캐스트는 호스트 주소가 모두 1인 주소 : 모든 호스트에 패킷을 전송하기 위한 주소

### 📌 클래스리스 주소 체계

**❗클래스풀 사용해도 아직도 유동적이지 못하다**

300명의 직원의 사용할 컴퓨터들을 동일한 네트워크 구성하고 싶지만 C 클래스는 IP 주소가 254개 밖에 안되어 B 클래스를 사용하면 여전히 낭비

**클래스리스 주소 체계는 클래스에 구애받지 않고 네트워크의 영역을 나누어 IP 주소 공간을 할당하는 방식**

**❗서브네 마스크**
  - IP 주소 상 네트워크 주소는 1, 호스트 주소는 0으로 표기한 비트열
  - 서브넷 마스크를 이용해 클래스를 원하는 크기로 쪼개어 사용하는 것을 **서브네팅**

**❗서브네팅**
  - IP 주소와 서브넷 마스크를 비트 AND 연산 처리

**❗서브넷 마스크 표기: CIDR 표기법**
  - IP 주소/서브넷 마스크상의 1의 개수 형식
    - IP 주소  192.168.219.103과 서브넷 마스크 255.255.255.0 ( 1이 24개 )
      - 192.168.219.103/24 으로 표기
        
  - 만약 300개 네트워크를 구성하고 싶을 시 (2^N -2 >= 300 )으로 호스트가 9비트는 차지가 필요
    - IP 주소: 192.168.10.25
    - 서브넷 마스크: 255.255.254.0 (/23)
    - 네트워크 주소: 192.168.10.0
    - 브로드캐스트 주소: 192.168.11.255

### 📌 공인 IP 주소와 사설 IP 주소

전세계에는 고유 IP 주소가 있고, 고유하지 않는 IP 주소가 있음

**❗공인 IP 주소**
  - 전 세계에서 고유한 IP 주소
  - 인터넷을 이용할 때 사용하는 IP 주소 ( ISP나 공인 IP 주소 할당 기관을 통해 할당 )

**❗사설 IP 주소와 NAT**
  - 사설 IP : 사설 네트워크에서 사용하기 위한 IP 주소
  - 사설 네트워크 : 인터넷, 외부 네트워크에 공개되지 않는 네트워크
  - 사설 IP 주소 종류
    - 10.0.0.0/8 (10.0.0.0  ~ 10.255.255.255 )
    - 172.16.0.0/12 (172.16.0.0 ~ 172.31.255.255 )
    - 192.168.0.0/16 (192.168.0.0 ~ 192.168.255.255 )
  - 사설 IP 주소 할당 주체 : **라우터**
  - 해당 호스트가 속한 사설 네트워크상에서만 유효한 주소, 얼마든지 다른 네트워크 상의 사설 IP 주소는 중복 가능

  - **NAT** : 사설 IP 주소와 네트워크 외부에서 사용되는 공인 IP주소를 변환
  - 대부분의 라우터와 공유기는 NAT 기능을 내장

### 📌 정적 IP 주소와 동적 IP 주소

**❗정적 할당**

  - 호스트에 수작업으로 IP 주소 부여 **(정적 IP 주소)**
  - 정적 IP 주소 입력 값
      - IP 주소
      - 서브넷 마스크
      - 게이트웨이 **(호스트가 속한 네트워크 외부로 나가기 위한 기본적인 첫 경로 = 라우터)**
      - DNS 주소

**❗동적 할당과 DHCP**

  - 동적 할당 : 호스트에 IP 주소가 동적으로 할당되는 방식 **(동적 IP 주소)**
  - **DHCP : IP 동적 할당에 사용되는 대표적인 프로토콜**
      - IP 주소를 할당 받는 호스트와 **DHCP 서버**와 통신으로 이루어짐
      - DHCP 서버 역할은 라우터(공유기)가 수행
      - DHCP로 할당받은 IP 주소는 **임대 기간**이 정해짐,끝나면 DHCP 서버에 반납

  - IP를 받기 위한 DHCP 서버간에 통신 되는 메시지 종류
      - **DHCP Discover**
          - 클라이언트 -> DHCP 서버
          - DHCP Discover 메시지를 통해 DHCP 서버 찾기 **(브로드캐스트로 전달)**
          - 이 시점 클라이넡는 주소를 할당 받지 못해 0.0.0.0 상태
            
      - **DHCP Offer**
          - DHCP 서버 -> 클라이언트
          - 클라이언트에게 할당해 줄 IP 주소 제안 / 서브넷 마스크/ 임대 기간
            
      - **DHCP Requets**
          - 클라이언트 -> DHCP 서버
          - DHCP Offer에 대한 응답으로 브로드캐스트로 전달
            
      - **DHCP Acknowledgment**
          - DHCP 서버 -> 클라이언트
          - 최종 승인과도 같은 메시지

IP 주소의 사용 기간이 모두 끝나 IP 주소가 DHCP 서버에 반납되면 다시 거쳐 IP 주소 재할당

**임대 갱신** : IP 주소 임대 기간이 끝나기 전에 임대 기간을 연장 , IP 주소의 임대 기간이 끝나기 전에 기본적으로 두차례 자동 수행

### 📌 예약 주소:0.0.0.0 vs 127.0.0.1

**❗루프백 주소**
  - 자기 자신을 가르키는 주소
  - 일반적으로 127.0.0.1, 로컬호스트 칭함
  - 패킷을 보내고 자기 자신에게 되돌아 옴

**❗이 네트워크의 이 호스트**
  - 0.0.0.0/8
  - IP 주소를 받기 전 해당 네트워크의 호스트를 지칭 하기 위한 예약 주소

**❗디폴트 라우터**
  - 패킷을 어떤 IP 주소로 전달할지 어려울 때, 기본적으로 패킷을 전달할 경로

## ⭐ 스터디 끝난 회고

공인 IP 주소가 곧 DNS를 통해 도메인을 등록되는데 얼마 남지 않은 공인 IP주소를 어떻게 처리할까 의문점을 가짐

서버에 공인 IP 주소를 할당하는 것은 비용이 발생하고, IPv4 주소는 한정되어 있기 때문에 모든 웹사이트마다 별도의 서버와 IP 주소를 할당하기는 어려운 상황, **가상 호스팅을 이용하여 이를 해결** 

  - **가상 호스팅(Virtual Hosting)**
    -  하나의 물리적 서버 또는 하나의 공인 IP 주소로 여러 웹사이트나 도메인을 운영할 수 있게 해주는 기술
      
    -  **이름 기반(Name-Based) 가상 호스팅**
      - 하나의 공인 IP 주소에서 여러 도메인을 운영하며, 요청에 포함된 도메인 이름으로 웹사이트를 구분
      - 헤더에 들어온 도메인 이름 마다 노출하는 Html 파일이 다른셈
        
    - **IP 기반(IP-Based) 가상 호스팅**
      -  각 도메인이 고유한 IP 주소를 가지고, IP 주소를 통해 웹사이트를 구분.

AWS를 통해 배포는 결국 해당 서버(컴퓨터)와 IP 주소를 임대 받는거고 왜 비용이 지불되는지 이해하게 됨.

다음은 **대형 카페에서 노트북 사용 시, ipconfig/all로 확인한 DHCP 임대기간 이미지**

<img width="484" alt="image" src="https://github.com/user-attachments/assets/5a0ae242-e972-46e9-b867-165f139e57ac"></br>

서브넷 마스크가 255.255.255.0 즉, 254명이 와이파이를 이용할 수 있음

DHCP 임대기간이 짧은 이유는 카페 사람들의 유동성을 생각해서 설정한거라 생각함. 사람들의 유동성을 고려해서 임대기간을 짧게하여 DHCP 임대 갱신이 줄어들어 효율적으로 LAN 네트워크 관리가 되는거라 판단함.


  
